<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>sixt class</title>
	<style type="text/css">
#box{position:absolute; left:100px; top:100px; padding:5px; background:#f0f3f9; font-size:12px; -moz-box-shadow:2px 2px 4px #666666; -webkit-box-shadow:2px 2px 4px #666666;}
#main{border:1px solid #a0b3d6; background:white;}
#bar{line-height:24px; background:#beceeb; border-bottom:1px solid #a0b3d6; padding-left:5px; cursor:move;}
#content{width:420px; height:250px; padding:10px 5px;}
   
		
	</style>
</head>
<body style="position: relative;">
     <div class="tianqi">
          <div class="tq">
           <h4>
           	点击天气即可获得天气数据 <br>	
           	今天：
		      天气：<p></p>
		      最低温:<p></p>
		      最高温:<p></p>
		      空气质量:<p></p>
		      风速:<p></p>
           </h4>
           <h4>
           	明天：
		      天气：<p></p>
		      最低温:<p></p>
		      最高温: <p></p>
		      空气质量:<p></p>
		      风速:<p></p>
           </h4>
           <h4>
           	后天：
		      天气：<p></p>
		      最低温:<p></p>
		      最高温: <p></p>
		      空气质量:<p></p>
		      风速:<p></p>
           </h4>
         </div>
     </div>
  <div id="box">
    <div id="main">
        <div id="bar">拖拽</div>
        <div id="content">
            内容……
        </div>
    </div>
</div>

</body>
<script src="http://www.zhangxinxu.com/study/js/zxx.drag.1.0.js" type="text/javascript"></script>
<script type="text/javascript">
//第一个	 
   var bodys=document.getElementsByTagName('body')[0];
   var newdiv=document.createElement("div");
   newdiv.innerHTML=("php");
   newdiv.style.height="222px";
   newdiv.style.width="222px";
   newdiv.style.color="yellow";
   newdiv.style.left="600px";
   newdiv.style.top="0px";
   newdiv.style.position="absolute";
   newdiv.style.backgroundColor="rgb(22,22,22)";
   bodys.appendChild(newdiv);
   function move(offset){
   	   var newleft=parseInt(newdiv.style.left)+offset;
	   function suijicolor(){   	  
		   var r = parseInt(Math.random()*200);
		   var g = parseInt(Math.random()*200);
		   var b = parseInt(Math.random()*200);
		   var rc=r+g+b;
			   if(rc<765){
			   // newdiv.style.backgroundColor="#"+rc;
			   newdiv.style.backgroundColor="rgb("+r+","+g+","+b+")";
			   tmove(); 	
			   }  
		   }
	   suijicolor();
       function tmove(){
       	   var weiyizongshijian=500;
		   var weiyishijianjiange=50;
		   var v=offset/(weiyizongshijian/weiyishijianjiange);
		   if ((v>0&&parseInt(newdiv.style.left)<newleft)||(v<0&&parseInt(newdiv.style.left)>newleft)){
		   setTimeout(tmove,weiyishijianjiange); 
		   newdiv.style.left=parseInt(newdiv.style.left)+v+"px";
		}
	        if (newleft==1600) {
			    newdiv.style.left=600+"px";
					        }							      	
			if (newleft==-400) {
		    	newdiv.style.left=600+"px";
					       }
       }
	}
   newdiv.addEventListener("click",function(){
   	return move(500);
   },false);
   newdiv.removeEventListener("click",function(){
   	return move(500);
   },false);
   //newdiv.addEventListener("click",function(){
   //return move(-500);
   //},false);
  
  //第二个
	var tianqi=document.querySelector(".tianqi");
	var xhr = new XMLHttpRequest();
	var handler=function(){
    xhr.open("get","http://123.207.89.151/jrtt/forecast" ,true);
	xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
	xhr.onreadystatechange = function() {
		  if (xhr.readyState === 4 && xhr.status === 200) {
		        //响应成功后的操作
		        var scriptxhr=JSON.parse(xhr.responseText);
		         console.log(scriptxhr); 
		        console.log(scriptxhr.明天);
		        var tq=document.getElementsByTagName('h4');
		        var p=tq[1].getElementsByTagName('p');
		        p[0].innerHTML=scriptxhr.明天.天气; 
		        p[1].innerHTML=scriptxhr.明天.最低温;
		        p[2].innerHTML=scriptxhr.明天.最高温;
		        p[3].innerHTML=scriptxhr.明天.风速;
		        p[4].innerHTML=scriptxhr.明天.空气质量;
		    }
}
		
	xhr.send();
}  
	tianqi.addEventListener("click",handler,false);
 //拖拽
 
     
     
     
     
	   var oBox = document.getElementById("box");
	   var oBar = document.getElementById("bar");
	   startDrag(oBar, oBox);
	 

         
</script>
 

</html>
