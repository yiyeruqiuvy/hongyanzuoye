<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>first_2 work</title>
</head>
<body>

</body>
<!-- <script src="C:\Users\11634\node_modules\babel-core\browser.min.js"></script> -->
<!-- <script type="text/babel"> -->
<script type="text/javascript">

//ajax_get 未解决跨域
var ajax = {
    method: 'get',
    url: 'http://apis.juhe.cn/mobile/get',
    data: {
    phone: '17323410000',
    key: 'fcbbb62f008c07cc7f8bae66c59be1f2',
  }
}
let get = (url,ajax)=>{
	return new Promise((resolve,reject)=>{
			let xhr = new XMLHttpRequest();
            xhr.open(ajax.method,ajax.url+"?phone="+ajax.data.phone+"&key="+ajax.data.key,true);
            xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            xhr.onreadystatechange = function() {
                 if (xhr.readyState === 4 && xhr.status ===200){               
                 	resolve(xhr)
                 }
                 else if(xhr.status === 0){
                 	reject(xhr.status);
                 }
            }
            xhr.send();  
	// resolve(xhr);
});
}
get('http://apis.juhe.cn/mobile/get',ajax).then((p)=>{
	console.log(p);
});
get('http://apis.juhe.cn/mobile/get').catch((p)=>{
	console.log("enner:satsus:"+p);
});
//http://apis.juhe.cn/mobile/get?phone=17323410000&key=fcbbb62f008c07cc7f8bae66c59be1f2


//jsonp+promise 失败的不清楚
// var gets = url =>{
//     return new Promise((resolve,reject)=>{
//         var script = document.createElement("script");
//         script.src = url;
//         document.body.appendChild(script);
//         var handleResponse = response =>{
//             if(response.readyState === 4 && response.status ===200){
//                 resolve(response);
//             }  else{
//                 reject(response.result);
//             } 
//         }
//     });
// }
// gets('http://apis.juhe.cn/mobile/get?phone=17323410000&key=fcbbb62f008c07cc7f8bae66c59be1f2&callback=handleResponse').then((response)=>{
//     console.log(response);
// });

// 单纯的jsonp 
let gets = url =>{
	let scr = document.createElement("script");
		scr.src = "http://apis.juhe.cn/mobile/get?phone=17323410000&key=fcbbb62f008c07cc7f8bae66c59be1f2&callback=handleResponse";
		document.body.appendChild(scr);
	}
	function handleResponse(response){
            console.log(response.result);
}
gets("http://apis.juhe.cn/mobile/get?phone=17323410000&key=fcbbb62f008c07cc7f8bae66c59be1f2&callback=handleResponse");



// 正则_1:telephone 按照要求写的,应该没错吧。
var str1 ='130-123-45678';
var reg = RegExp(/^\(?[\\+]?8?6?\)?-?1\d{2}-?\d{4}-?\d{4}/g);
console.log(reg.test(str1));

//正则_2 :email 同上
var str2 ='a.b@c.e-d';
var reg = RegExp(/^[a-z-]+(\.[a-z]+)*@[a-z-]+(\.[a-z-]+)*(\.[a-z]+)+$/g);
console.log(reg.test(str2));
</script>
	


</html>